"use strict";(self.webpackChunktasky_supplier=self.webpackChunktasky_supplier||[]).push([[76],{8076:(N,m,c)=>{c.r(m),c.d(m,{CategListModule:()=>U});var _=c(7087),g=c(3759),p=c(3241),t=c(2283),C=c(6806),h=c(7883),f=c(1639),x=c(1359),b=c(3578),u=c(9347),v=c(8464);function Z(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div",26)(1,"div",36)(2,"div",37),t._uU(3),t.qZA(),t.TgZ(4,"div",38),t._uU(5),t.qZA(),t.TgZ(6,"mat-icon",35),t.NdJ("click",function(){const i=t.CHM(e).index,n=t.oxw().index,o=t.oxw(2).$implicit,d=t.oxw();return t.KtG(d.addEditCharactItem(o,n,i))}),t._uU(7,"edit"),t.qZA(),t.TgZ(8,"mat-icon",33),t.NdJ("click",function(){const i=t.CHM(e).index,n=t.oxw().index,o=t.oxw(2).$implicit,d=t.oxw();return t.KtG(d.deleteCharactItem(o,n,i))}),t._uU(9,"delete"),t.qZA()()()}if(2&r){const e=l.$implicit;t.xp6(3),t.Oqu(e.title),t.xp6(2),t.Oqu(e.content_type)}}function w(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31)(4,"div",32),t._uU(5),t.qZA(),t.TgZ(6,"mat-icon",23),t.NdJ("click",function(){const i=t.CHM(e).index,n=t.oxw(2),o=n.$implicit,d=n.index,E=t.oxw();return t.KtG(E.addEditCharactItem(o,d,i))}),t._uU(7,"edit"),t.qZA(),t.TgZ(8,"mat-icon",33),t.NdJ("click",function(){const i=t.CHM(e).index,n=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.deleteHeader(n,i))}),t._uU(9,"delete"),t.qZA()(),t.TgZ(10,"div",34),t._uU(11," Elementos "),t.TgZ(12,"div")(13,"mat-icon",35),t.NdJ("click",function(){const i=t.CHM(e).index,n=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.addEditCharactItem(n,i,-1))}),t._uU(14,"add"),t.qZA()()()(),t.YNc(15,Z,10,2,"div",27),t.qZA()()}if(2&r){const e=l.$implicit;t.xp6(5),t.Oqu(e.header),t.xp6(10),t.Q6J("ngForOf",e.data)}}function y(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div",26)(1,"div",36)(2,"div",37),t._uU(3),t.qZA(),t.TgZ(4,"mat-icon",35),t.NdJ("click",function(){const i=t.CHM(e).index,n=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.addEditSubCategory(n,i))}),t._uU(5,"edit"),t.qZA(),t.TgZ(6,"mat-icon",20),t._uU(7,"delete"),t.qZA()()()}if(2&r){const e=l.$implicit;t.xp6(3),t.Oqu(e.name)}}function T(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"div",22)(2,"div",7),t._uU(3,"Carater\xedsticas"),t.qZA(),t._uU(4," \xa0 "),t.TgZ(5,"mat-icon",23),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,i=t.oxw();return t.KtG(i.addEditHeader(s,-1))}),t._uU(6,"add"),t.qZA()(),t.TgZ(7,"div",24),t.YNc(8,w,16,2,"div",25),t.qZA(),t.TgZ(9,"div",26)(10,"div",22)(11,"div",7),t._uU(12,"Sub categor\xedas"),t.qZA(),t._uU(13," \xa0 "),t.TgZ(14,"mat-icon",23),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,i=t.oxw();return t.KtG(i.addEditSubCategory(s,-1))}),t._uU(15,"add"),t.qZA(),t.YNc(16,y,8,1,"div",27),t.qZA()()()}if(2&r){const e=t.oxw().$implicit;t.xp6(8),t.Q6J("ngForOf",e.characterList),t.xp6(8),t.Q6J("ngForOf",e.subCategory)}}function k(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"label"),t._UZ(4,"img",14)(5,"div"),t.TgZ(6,"input",15),t.NdJ("click",function(){const i=t.CHM(e).$implicit,n=t.oxw();return t.KtG(n.fileChangeEvent(i,null))}),t.qZA()()(),t.TgZ(7,"div",16)(8,"div",7),t._uU(9),t.qZA(),t.TgZ(10,"div",17),t._uU(11),t.qZA()(),t.TgZ(12,"div",18)(13,"mat-icon",19),t.NdJ("click",function(){const i=t.CHM(e).$implicit,n=t.oxw();return t.KtG(n.addEditCategory(i))}),t._uU(14,"edit"),t.qZA(),t.TgZ(15,"mat-icon",19),t.NdJ("click",function(){const i=t.CHM(e).index,n=t.oxw();return t.KtG(n.switchSubView(i))}),t._uU(16,"list"),t.qZA(),t._uU(17," \xa0 "),t.TgZ(18,"mat-icon",20),t._uU(19,"delete"),t.qZA()()(),t.YNc(20,T,17,2,"div",21),t.qZA()}if(2&r){const e=l.$implicit,a=l.index,s=t.oxw();t.xp6(4),t.Q6J("src",s.getCategImage(e),t.LSH),t.xp6(5),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(9),t.Q6J("ngIf",s.getSubView(a))}}const A=[{path:"",component:(()=>{class r{constructor(e,a,s,i){this.dtb=e,this.dg=a,this.imageCompress=s,this.snkBar=i,this.categ_list=[],this.subView=-1,this.category={controls:[{name:"_id",label:"C\xf3digo:",type:"text",style:"w-full",disabled:!0,validators:{required:!0}},{name:"name",label:"Nombre de la categor\xeda:",type:"text",style:"w-full",validators:{required:!0}},{name:"description",label:"Descripci\xf3n:",type:"textarea",style:"w-full",totalRows:2,validators:{}},{name:"urlpicture",label:"Im\xe1gen:",type:"text",style:"w-5/6",sideBtn:"image",validators:{}}]},this.characteristic={controls:[{name:"header",label:"T\xedtulo:",type:"text",style:"w-full",validators:{required:!0}}]},this.CharactItem={controls:[{name:"title",label:"T\xedtulo de la carater\xedstica:",type:"text",style:"w-full",validators:{required:!0}},{name:"content_type",label:"Tipo:",type:"select",selectOptions:[{key:"number",value:"N\xfamero"},{key:"text",value:"Texto"},{key:"link",value:"V\xednculo"}],style:"w-full",validators:{required:!0}}]},this.SubCateg={controls:[{name:"id",label:"C\xf3digo:",type:"text",style:"w-full",disabled:!0,validators:{required:!0}},{name:"name",label:"Nombre de la categor\xeda:",type:"text",style:"w-full",validators:{required:!0}},{name:"urlpicture",label:"Im\xe1gen:",type:"text",style:"w-5/6",sideBtn:"image",validators:{}}]}}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.categ_list=(yield e.dtb.getAllCategAsync())||[]})()}getClicked(e){var a=this;return(0,p.Z)(function*(){switch(e.index){case 1:case 3:break;case 2:a.addEditCategory(null)}})()}addEditCategory(e){let a=!1;null===e&&(e={_id:this.dtb.nextConsecutive("C",3,!0,this.categ_list.length.toString()),name:"",characterList:[]},a=!0),this.dg.aDefault({schema:this.category,value:e,title:"Categor\xeda",dgheigth:475}).subscribe(i=>{i&&(delete i._propName_,delete i._valid_,this.dg.updatePropResult(e,i),e&&this.dtb.setCategory(e,a))})}addEditHeader(e,a){let s=!1,i={header:"",data:[]};-1===a?(i={header:"",data:[]},s=!0):i=e.characterList[a],this.dg.aDefault({schema:this.characteristic,value:i,title:"T\xedtulo de la caracter\xedstica",dgheigth:220}).subscribe(o=>{o&&(delete o._propName_,delete o._valid_,this.dg.updatePropResult(i,o),s?e.characterList.push(i):e.characterList[a]=i,this.dtb.setCategory(e,!1))})}deleteHeader(e,a){const s=e.characterList[a];s&&this.snkBar.open("Eliminar "+s.header,"Ok",{duration:7e3}).onAction().subscribe(i=>{e.characterList.splice(a,1),this.dtb.setCategory(e,!1)})}addEditCharactItem(e,a,s){let i=!0,n={title:"",content_type:"text"};s>=0&&(n=e.characterList[a].data[s],i=!1),this.dg.aDefault({schema:this.CharactItem,value:n,title:"Datos de "+e.characterList[a].header,dgheigth:300}).subscribe(d=>{d&&(delete d._propName_,delete d._valid_,this.dg.updatePropResult(n,d),i?e.characterList[a].data.push(n):e.characterList[a].data[s]=n,this.dtb.setCategory(e,!1))})}deleteCharactItem(e,a,s){const i=e.characterList[a].data[s];i&&this.snkBar.open("Eliminar "+i.title,"Ok",{duration:7e3}).onAction().subscribe(n=>{e.characterList[a].data.splice(s,1),this.dtb.setCategory(e,!1)})}addEditSubCategory(e,a){let i,s=!1;e.subCategory&&(-1===a?(i={id:this.dtb.nextConsecutive(e._id+"_",3,!0,e.subCategory.length.toString()),name:""},s=!0):i=e.subCategory[a]),this.dg.aDefault({schema:this.SubCateg,value:i,title:"Subcategor\xeda",dgheigth:375}).subscribe(o=>{o&&(delete o._propName_,delete o._valid_,this.dg.updatePropResult(i,o),e.subCategory&&(s?e.subCategory?.push(i):e.subCategory[a]=i,this.dtb.setCategory(e,!1)))})}switchSubView(e){this.subView=this.subView===e?-1:e}getSubView(e){return this.subView===e}getCategImage(e){}fileChangeEvent(e,a=null){}static#t=this.\u0275fac=function(a){return new(a||r)(t.Y36(C.k),t.Y36(h.x),t.Y36(f.r2),t.Y36(x.ux))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-categ-list"]],decls:21,vars:4,consts:[[1,"flex","flex-col","max-h-screen"],[3,"buttons","nav_menu","onClicked"],["id","spanTrigger",3,"matMenuTriggerFor"],["editControlTrigger","matMenuTrigger"],[1,"flex-1","px-1","pt-1","bg-gray-200","overflow-auto"],["class","p-1 flex flex-col bg-white border border-gray-500",4,"ngFor","ngForOf"],["products","matMenu"],[1,"font-medium"],["color","primary"],["color","primary",1,"mt-1"],["mat-menu-item",""],[1,"p-1","flex","flex-col","bg-white","border","border-gray-500"],[1,"flex","justify-start"],[1,"w-30"],["alt","Click to add image",1,"h-32","w-28","border","border-gray-400","py-1","px-1","rounded","shadow-sm",3,"src"],["accept",".png,.jpg,.jpeg",2,"display","none",3,"click"],[1,"grow","ml-2","flex","flex-col"],[1,"mt-1","font-thin","text-sm"],[1,"w-44","text-sky-500"],[3,"click"],["color","warn"],[4,"ngIf"],[1,"mt-2","flex","items-end","justify-end","px-1","text-sm","text-sky-500","bg-gray-200"],[1,"w-20","text-sky-500",3,"click"],[1,"flex","flex-col","mx-2","mt-1","text-sm"],["class"," bg-gray-200 mt-2",4,"ngFor","ngForOf"],[1,"flex","flex-col"],["class","flex flex-col",4,"ngFor","ngForOf"],[1,"bg-gray-200","mt-2"],[1,"border","border-gray-300"],[1,"flex","flex-row","align-middle"],[1,"grow","flex","flex-row","items-center","justify-center"],[1,"text-center","font-medium"],["color","warn",3,"click"],[1,"w-20","flex","flex-row","items-end","justify-end","align-middle","font-medium","text-sm","text-sky-500","w-40"],[1,"text-sky-500",3,"click"],[1,"flex","justify-items-start","align-middle","divide-y","divide-x","divide-gray-300"],[1,"w-1/2","px-1","font-medium","text-sm","text-gray-800"],[1,"w-1/2","px-1","text-sm","bg-white"]],template:function(a,s){if(1&a&&(t.TgZ(0,"div",0)(1,"app-header",1),t.NdJ("onClicked",function(n){return s.getClicked(n)}),t.qZA(),t._UZ(2,"span",2,3),t.TgZ(4,"div",4),t.YNc(5,k,21,4,"div",5),t.qZA(),t.TgZ(6,"mat-menu",null,6)(8,"div",7)(9,"mat-icon",8),t._uU(10,"cloud_upload"),t.qZA(),t._uU(11," Base remota "),t.qZA(),t._UZ(12,"hr"),t.TgZ(13,"div",7)(14,"mat-icon",9),t._uU(15,"edit"),t.qZA(),t._uU(16," Base local "),t.qZA(),t.TgZ(17,"button",10),t._uU(18," Data base hacia Excel "),t.qZA(),t.TgZ(19,"button",10),t._uU(20," Lista de im\xe1genes en la base "),t.qZA()()()),2&a){const i=t.MAs(7);t.xp6(1),t.Q6J("buttons","111111")("nav_menu",!1),t.xp6(1),t.Q6J("matMenuTriggerFor",i),t.xp6(3),t.Q6J("ngForOf",s.categ_list)}},dependencies:[_.sg,_.O5,b.G,u.VK,u.OP,u.p6,v.Hw]})}return r})()}];let L=(()=>{class r{static#t=this.\u0275fac=function(a){return new(a||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(A),g.Bz]})}return r})();var q=c(769);let U=(()=>{class r{static#t=this.\u0275fac=function(a){return new(a||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[_.ez,L,q.O,u.Tx,v.Ps,x.ZX]})}return r})()}}]);