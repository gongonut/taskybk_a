"use strict";(self.webpackChunktasky_supplier=self.webpackChunktasky_supplier||[]).push([[313],{4313:(L,f,o)=>{o.r(f),o.d(f,{TargetModule:()=>_});var m=o(4070),p=o(781),d=o(3241),t=o(6339),h=o(6789),v=o(3792),y=o(1781),T=o(3016),Z=o(9869),g=o(8137),c=o(4156);const C=["editControlTrigger"];function x(r,U){if(1&r){const a=t.EpF();t.TgZ(0,"div",9)(1,"div",10),t._uU(2),t.qZA(),t.TgZ(3,"div",11),t._uU(4,"Tel\xe9fono:"),t.qZA(),t._uU(5,"\xa0 "),t.TgZ(6,"div",12),t._uU(7),t.qZA(),t._UZ(8,"div",13),t.TgZ(9,"div",11),t._uU(10,"Correo:"),t.qZA(),t._uU(11,"\xa0 "),t.TgZ(12,"div",14),t._uU(13),t.qZA(),t.TgZ(14,"mat-icon",15),t.NdJ("click",function(){const n=t.CHM(a).index,s=t.oxw();return t.KtG(s.onDeleteStaff(n))}),t._uU(15,"delete"),t.qZA()()}if(2&r){const a=U.$implicit,e=t.oxw();t.xp6(2),t.Oqu(e.getTaskerStrData(0,a)),t.xp6(5),t.Oqu(e.getTaskerStrData(1,a)),t.xp6(6),t.Oqu(e.getTaskerStrData(2,a))}}const k=[{path:"",component:(()=>{class r{constructor(a,e,i,n){this.sharedvar=a,this.dg=e,this.ds=i,this.dtb=n}ngOnInit(){return(0,d.Z)(function*(){})()}getClicked(a){if(2===a.index){let e=document.getElementById("spanTrigger");e&&(e.style.display="",e.style.position="absolute",e.style.left=a.pageX+5+"px",e.style.top=a.pageY+5+"px",this.editControlTrigger.openMenu())}}onTaskerCond(a,e){var i=this;return(0,d.Z)(function*(){switch(a){case 0:yield i.onSelCtrlStaff();break;case 1:i.filterStaff()}})()}onSelCtrlStaff(){var a=this;return(0,d.Z)(function*(){const e=[];(yield a.dtb.getStaffByFilterAsync({queryType:1,active:!0,stars:0,rol:"K"})).forEach(s=>{s&&e.push({selected:!1,myid:s._id,name:`${s.names} ${s.lastnames||""}`,hide1:`${s.phone}:${s.email}`})}),a.ds.aSelectDefault({title:"Seleccione Tasker",dgheigth:450,viewfilter:!0,viewAdd:!1,multiSelect:!0,valuelst:e}).subscribe(function(){var s=(0,d.Z)(function*(l){l&&a.updateTaskerList(l)});return function(l){return s.apply(this,arguments)}}())})()}updateTaskerList(a){var e=this;return(0,d.Z)(function*(){a.forEach(i=>{e.sharedvar.pollGrpExecuted.taskerList?.includes(i.myid)||(e.sharedvar.pollGrpExecuted.taskerList.push(i.myid),e.sharedvar.pollGrpExecuted.taskerNameList.push(i.name+":"+i.hide1))}),yield e.dtb.updatePollGroupAsync(e.sharedvar.pollGrpExecuted)})()}filterStaff(){var a=this;return(0,d.Z)(function*(){let n=yield a.dg.aDefault({schema:{controls:[{name:"age_from",label:"edad m\xednima:",type:"number",default:18,validators:{}},{name:"age_to",label:"edad l\xedmite:",type:"number",default:100,validators:{}},{name:"city",label:"Ciudad",type:"textarea",style:"w-full",totalRows:5,validators:{}},{name:"studyLevel",label:"Nivel del estudio:",type:"select",validators:{},selectOptions:[{key:"0",value:"Ninguno"},{key:"1",value:"Primaria"},{key:"2",value:"Secundario"},{key:"3",value:"Universitario"}]},{name:"stars",label:"Calificaci\xf3n (1..5):",type:"number",default:1,validators:{min:1,max:5}}]},title:"Filtros",dgwidth:300});if(n){const s={queryType:3,active:!0,rol:"K"};n.city&&n.city.length>0&&(s.city=n.city.split("\n")),n.studyLevel&&(s.studyLevel=n.studyLevel);const l=yield a.dtb.getStaffByFilterAsync(s);if(!l)return;n=[],l.forEach(u=>{n.push({myid:u._id,name:`${u.names} ${u.lastnames||""}`,hide1:`${u.phone}:${u.email}`})}),a.updateTaskerList(n)}})()}execFilter(){return(0,d.Z)(function*(){})()}getTaskerStrData(a,e){return e.split(":")[a]||""}onDeleteStaff(a){var e=this;return(0,d.Z)(function*(){e.sharedvar.pollGrpExecuted.taskerList?.splice(a,1),e.sharedvar.pollGrpExecuted.taskerNameList?.splice(a,1),yield e.dtb.updatePollGroupAsync(e.sharedvar.pollGrpExecuted)})()}static#t=this.\u0275fac=function(e){return new(e||r)(t.Y36(h.D),t.Y36(v.x),t.Y36(y.n),t.Y36(T.k))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-target"]],viewQuery:function(e,i){if(1&e&&t.Gf(C,5),2&e){let n;t.iGM(n=t.CRH())&&(i.editControlTrigger=n.first)}},decls:23,vars:4,consts:[[3,"buttons","nav_menu","onClicked"],["id","spanTrigger",3,"matMenuTriggerFor"],["editControlTrigger","matMenuTrigger"],[1,"h-96","p-4"],[1,"flex-col","flex-wrap","p-2","gap-1"],["class","h-10 flex gap-1 border-b border-gray-100",4,"ngFor","ngForOf"],["targetEdit","matMenu"],[1,"h-8","m-2","font-medium","text-xl"],["mat-menu-item","",3,"click"],[1,"h-10","flex","gap-1","border-b","border-gray-100"],[1,"w-60","font-medium"],[1,"font-thin"],[1,"w-20","font-thin","text-gray-400"],[1,"w-2"],[1,"w-72","font-thin","text-gray-400"],[1,"text-gray-300","hover:text-violet-500",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"app-header",0),t.NdJ("onClicked",function(s){return i.getClicked(s)}),t.qZA(),t._UZ(1,"span",1,2),t.TgZ(3,"div",3)(4,"div",4),t.YNc(5,x,16,3,"div",5),t.qZA()(),t.TgZ(6,"mat-menu",null,6)(8,"div",7),t._uU(9,"Condiciones"),t.qZA(),t._UZ(10,"hr"),t.TgZ(11,"button",8),t.NdJ("click",function(){return i.onTaskerCond(0,"De la lista")}),t.TgZ(12,"mat-icon"),t._uU(13,"build"),t.qZA(),t._uU(14," De la lista "),t.qZA(),t.TgZ(15,"button",8),t.NdJ("click",function(){return i.onTaskerCond(1,"De un filtro")}),t.TgZ(16,"mat-icon"),t._uU(17,"file_download"),t.qZA(),t._uU(18," Filtro "),t.qZA(),t.TgZ(19,"button",8),t.NdJ("click",function(){return i.onTaskerCond(2,"Todos")}),t.TgZ(20,"mat-icon"),t._uU(21,"file_download"),t.qZA(),t._uU(22," Todos "),t.qZA()()),2&e){const n=t.MAs(7);t.Q6J("buttons","101000")("nav_menu",!0),t.xp6(1),t.Q6J("matMenuTriggerFor",n),t.xp6(4),t.Q6J("ngForOf",i.sharedvar.pollGrpExecuted.taskerNameList)}},dependencies:[m.sg,Z.G,g.Hw,c.VK,c.OP,c.p6]})}return r})()}];let A=(()=>{class r{static#t=this.\u0275fac=function(e){return new(e||r)};static#e=this.\u0275mod=t.oAB({type:r});static#a=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(k),p.Bz]})}return r})();var b=o(5425),S=o(7774);let _=(()=>{class r{static#t=this.\u0275fac=function(e){return new(e||r)};static#e=this.\u0275mod=t.oAB({type:r});static#a=this.\u0275inj=t.cJS({imports:[m.ez,A,b.O,S.N,g.Ps,c.Tx]})}return r})()}}]);