"use strict";(self.webpackChunktasky_supplier=self.webpackChunktasky_supplier||[]).push([[692],{8692:(g,u,l)=>{l.r(u),l.d(u,{MultiDynamicDialogComponent:()=>f});var r=l(3241),_=l(765),t=l(6339),d=l(4070),c=l(4370),m=l(8137),h=l(2224);function p(s,y){if(1&s){const e=t.EpF();t.TgZ(0,"div",8)(1,"span")(2,"mat-icon",9),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onHeaderAddClick())}),t._uU(3),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(1),t.Tol(e.buttonStyle),t.xp6(2),t.Oqu(e.header)}}let f=(()=>{class s{constructor(e,i){this.dialogRef=e,this.data=i,this.disable=!0,this.header="",this.reset=0,this.buttonStyle="block border-b-4 p-3 w-12 hover:border-violet-500 hover:text-violet-500",this.delButton="delete",this.delText="",e.disableClose=!0,this.schema=this.data.schema||{},this.data.tags&&(this.header=this.data.tags.headerAdd||"",this.buttonStyle=this.data.tags.headButtonStyle||this.buttonStyle,this.delButton=this.data.tags.delButton||this.delButton,this.delText=this.data.tags.delText||this.delText)}getValidState(e){this.disable=!e}onGetData(e){var i=this;return(0,r.Z)(function*(){if(!0===e.state.delete)return e.valueList.splice(e.index,1),i.data.value=JSON.parse(JSON.stringify(e.valueList)),void(i.resultList=e.valueList);if(i.resultList=e.valueList,e._propName_&&e._propName_.length>0&&i.data.function){const n=i.data.function.findIndex(a=>a.name.includes(e._propName_));if(n>=0&&(0===i.data.function[n].btn_source||i.data.function[n].btn_source>0&&(!0===e._btnclick_||!0===e._btnclick_2_))){const a=yield i.ejecutarFuncion(i.data.function[n].self,i.data.function[n].function,i.resultList[e.index]);a&&(a.schema&&(i.schema=a.schema),a.value&&(i.resultList[e.index]=a.value,i.data.value=i.resultList,i.reset++))}}})()}ejecutarFuncion(e,i,n){var a=this;return(0,r.Z)(function*(){return yield i(e,n,a.schema)})()}onHeaderAddClick(){this.resultList.push({}),this.data.value=JSON.parse(JSON.stringify(this.resultList))}onDismiss(){this.dialogRef.close()}onSave(){this.dialogRef.close(this.resultList)}static#t=this.\u0275fac=function(i){return new(i||s)(t.Y36(_.so),t.Y36(_.WI))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-multi-dynamic-dialog"]],decls:14,vars:9,consts:[[1,"flex","flex-col","h-full"],[1,"h-16","p-3","text-2xl","bg-violet-600","text-white","font-medium"],["class","flex items-start border-b border-gray-300 text-gray-600 bg-gray-50",4,"ngIf"],[1,"flex-1","px-2","pt-3","mt-1","overflow-auto"],[3,"schema","valuesList","reset","setValueByIndex","delButton","delText","validState","resultByIndex"],[1,"flex","p-3","justify-end","border-t","border-violet-500"],["mat-stroked-button","","color","warn",3,"click"],["mat-stroked-button","","color","primary","cdkFocusInitia","",3,"disabled","click"],[1,"flex","items-start","border-b","border-gray-300","text-gray-600","bg-gray-50"],["matTooltip","Agregar",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t.YNc(3,p,4,3,"div",2),t.TgZ(4,"div",3)(5,"app-multi-dynamic",4),t.NdJ("validState",function(o){return n.getValidState(o)})("resultByIndex",function(o){return n.onGetData(o)}),t.qZA()(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return n.onDismiss()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()(),t._uU(10," \xa0 "),t.TgZ(11,"button",7),t.NdJ("click",function(){return n.onSave()}),t.TgZ(12,"mat-icon"),t._uU(13,"done"),t.qZA()()()()),2&i&&(t.xp6(2),t.Oqu(n.data.title),t.xp6(1),t.Q6J("ngIf",""!==n.header),t.xp6(2),t.Q6J("schema",n.schema)("valuesList",n.data.value)("reset",n.reset)("setValueByIndex",n.setValueByIndex)("delButton",n.delButton)("delText",n.delText),t.xp6(6),t.Q6J("disabled",n.disable))},dependencies:[d.O5,c.lW,m.Hw,h.MultiDynamicComponent]})}return s})()}}]);