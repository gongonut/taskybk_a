"use strict";(self.webpackChunktasky_supplier=self.webpackChunktasky_supplier||[]).push([[435],{9435:(C,l,s)=>{s.r(l),s.d(l,{DialogComponent:()=>v});var _=s(3241),r=s(765),t=s(6339),m=s(1618),d=s(626),u=s(4070),p=s(4370),g=s(8137),h=s(1030);function f(o,c){if(1&o&&t._UZ(0,"img",11),2&o){const a=t.oxw(2);t.Q6J("src",a.getImage(),t.LSH)}}function b(o,c){1&o&&(t.TgZ(0,"div",12)(1,"span"),t._uU(2,"Foto/Image."),t.qZA()())}function y(o,c){if(1&o){const a=t.EpF();t.TgZ(0,"label"),t.YNc(1,f,1,1,"img",8),t.YNc(2,b,3,0,"div",9),t.TgZ(3,"input",10),t.NdJ("click",function(){t.CHM(a);const i=t.oxw();return t.KtG(i.fileChangeEvent())}),t.qZA()()}if(2&o){const a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.data.image),t.xp6(1),t.Q6J("ngIf",!a.data.image)}}let v=(()=>{class o{constructor(a,e,i,n){this.dialogRef=a,this.data=e,this.sanitizer=i,this.imageCompress=n,this.disable=!0,this.reset=0,a.disableClose=!0,this.schema=this.data.schema||{}}getImage(){return this.sanitizer.bypassSecurityTrustUrl(this.data.image)}fileChangeEvent(){this.imageCompress.uploadFile().then(({image:a,orientation:e})=>{console.log("Size in bytes of the uploaded image was:",this.imageCompress.byteCount(a)),this.imageCompress.compressFile(a,e,100,100,this.data.imgwidth,this.data.imgheight).then(i=>{this.data.image=i,console.log("Size in bytes after compression is now:",this.imageCompress.byteCount(i))})})}onGetData(a){var e=this;return(0,_.Z)(function*(){if(e.result=a,e.disable=!1===a._valid_,a._propName_.length>0&&(a._btnclick_&&a._propName_.startsWith("pass")&&e.changeVisiblePass(a._propName_),e.data.function)){const i=e.data.function.findIndex(n=>n.name.includes(a._propName_));if(i>=0&&(0===e.data.function[i].btn_source||e.data.function[i].btn_source>0&&(!0===a._btnclick_||!0===a._btnclick_2_))){const n=yield e.ejecutarFuncion(e.data.function[i].self,e.data.function[i].function,e.result);n&&(n.schema&&(e.schema=n.schema),n.value&&(e.data.value=n.value,e.reset++))}}})()}ejecutarFuncion(a,e,i){var n=this;return(0,_.Z)(function*(){return yield e(a,i,n.schema)})()}changeVisiblePass(a){if(this.schema.controls&&this.schema.controls.length>1){const e=this.schema.controls.find(i=>i.name===a);e.sideBtn="visibility"===e.sideBtn?"visibility_off":"visibility",e.type="visibility_off"===e.sideBtn?"text":"password"}}onDismiss(){this.dialogRef.close()}onSave(){this.dialogRef.close(this.result)}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(r.so),t.Y36(r.WI),t.Y36(m.H7),t.Y36(d.r2))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-dialog"]],decls:14,vars:6,consts:[[1,"flex","flex-col","h-full"],[1,"h-16","p-3","text-2xl","bg-violet-600","text-white","font-medium"],[1,"flex-1","px-3","pt-3","mt-1","overflow-auto"],[4,"ngIf"],[3,"jsonFormData","values","reset","result"],[1,"flex","p-3","justify-end","border-t","border-violet-500"],["mat-stroked-button","","color","warn",3,"click"],["mat-stroked-button","","color","primary","cdkFocusInitia","",3,"disabled","click"],["class","w-48 h-48 border border-gray-200 py-1 px-2 rounded shadow-sm",3,"src",4,"ngIf"],["class","w-48 h-48 border border-gray-200 py-1 px-2 rounded shadow-sm",4,"ngIf"],["accept",".png,.jpg",2,"display","none",3,"click"],[1,"w-48","h-48","border","border-gray-200","py-1","px-2","rounded","shadow-sm",3,"src"],[1,"w-48","h-48","border","border-gray-200","py-1","px-2","rounded","shadow-sm"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,y,4,2,"label",3),t.TgZ(5,"app-dynamic-form",4),t.NdJ("result",function(D){return i.onGetData(D)}),t.qZA()(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return i.onDismiss()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()(),t._uU(10," \xa0 "),t.TgZ(11,"button",7),t.NdJ("click",function(){return i.onSave()}),t.TgZ(12,"mat-icon"),t._uU(13,"done"),t.qZA()()()()),2&e&&(t.xp6(2),t.Oqu(i.data.title),t.xp6(2),t.Q6J("ngIf",i.data.showImage),t.xp6(1),t.Q6J("jsonFormData",i.schema)("values",i.data.value)("reset",i.reset),t.xp6(6),t.Q6J("disabled",i.disable))},dependencies:[u.O5,p.lW,g.Hw,h.r]})}return o})()}}]);