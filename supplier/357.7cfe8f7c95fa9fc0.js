"use strict";(self.webpackChunktasky_supplier=self.webpackChunktasky_supplier||[]).push([[357],{9381:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>PollDetailComponent});var C_Users_Juan_Carlos_Documents_proyectos_tasky_tasky_supplier_node_modules_pnpm_babel_runtime_7_20_13_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3241),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2283),src_app_shared_var_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4758),src_app_dialog_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3638),_angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1359),src_app_database_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6806),_angular_common__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7087),_components_dynamic_form_dynamic_form_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5499),_angular_material_menu__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9347),_angular_material_icon__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8464),_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(5559);const _c0=["editControlTrigger"];function PollDetailComponent_div_2_Template(r,s){if(1&r){const o=_angular_core__WEBPACK_IMPORTED_MODULE_2__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(0,"div",9)(1,"app-dynamic-form",10),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("result",function(c){_angular_core__WEBPACK_IMPORTED_MODULE_2__.CHM(o);const e=_angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_2__.KtG(e.onGetData(c))})("dropped",function(c){_angular_core__WEBPACK_IMPORTED_MODULE_2__.CHM(o);const e=_angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_2__.KtG(e.onDrop(c))}),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()()}if(2&r){const o=_angular_core__WEBPACK_IMPORTED_MODULE_2__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("jsonFormData",o.sharedvar.pollSelected.schema)("editButton","more_horiz")("commands",o.commandIcon)}}let PollDetailComponent=(()=>{class _PollDetailComponent{constructor(r,s,o,a){this.sharedvar=r,this.dg=s,this.snkBar=o,this.dtb=a,this.defaPoll={controls:[{name:"welcome",label:"welcome",default:"Selecciona un Formulario",type:"header",style:"w-full",validators:{}}]},this.deleteDrop=!1,this.commandIcon=""}ngOnInit(){return(0,C_Users_Juan_Carlos_Documents_proyectos_tasky_tasky_supplier_node_modules_pnpm_babel_runtime_7_20_13_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__.Z)(function*(){})()}ngOnDestroy(){}getClicked(r){2===r.index&&this.onAddEditControl(-1)}onAddEditControl(r=-1){if(!this.sharedvar.pollSelected)return void this.snkBar.open("Seleccione un formulario.","Ok",{duration:5e3});let o,s="";this.sharedvar.pollSelected.schema.controls||(this.sharedvar.pollSelected.schema.controls=[]),r>=0&&(o=JSON.parse(JSON.stringify(this.sharedvar.pollSelected.schema.controls[r])),s=this.sharedvar.pollSelected.schema.controls[r].name),this.dg.aDinamycDialog(o).subscribe(a=>{if(a){if(!a._valid_)return void this.snkBar.open("Debe ingresar la informaci\xf3n solicitada.","Ok",{duration:5e3});let c=JSON.parse(JSON.stringify(this.sharedvar.pollSelected?.schema));const e=this.buildPollItem(a);if(s!==e.name){if(e.name=this.sharedvar.validateName(e.name),!e.name)return void this.snkBar.open("El nombre del control debe estar compuesto por texto y/o n\xfameros y linea abajo, su extenci\xf3n m\xe1xima es de 125 caracteres.","Ok",{duration:1e4});e.name=this.dtb.getUniqueName("",e.name,this.sharedvar.pollGrpExecuted.pollList)}o?c.controls[r]=e:(c.controls.push(e),r=c.controls.length-1),this.sharedvar.pollSelected&&(this.sharedvar.pollSelected.schema=c)}})}buildPollItem(item){const ctrl={name:item.name,label:item.label,type:item.type,validators:item.validators||{}};return item.default&&(ctrl.default=item.default),item.style&&(ctrl.style=item.style),item.default&&(ctrl.default=item.default),item.selectOptions&&(ctrl.selectOptions=eval(item.selectOptions)),item.totalRows&&(ctrl.totalRows=item.totalRows),item.avalue&&(ctrl.avalue=item.avalue),item.description&&(ctrl.description=item.description),item.tags&&(ctrl.tags=item.tags),item.required?ctrl.validators.required=!0:ctrl.validators.nullValidator=!0,item.sideBtn&&(ctrl.sideBtn=item.sideBtn),item.sideBtn2&&(ctrl.sideBtn2=item.sideBtn2),item.disabled&&(ctrl.disabled=item.disabled),ctrl}onGetData(r){this.result=r;const s=this.result._propName_;if(this.sharedvar.pollSelected&&this.sharedvar.pollSelected.schema.controls){const o=this.sharedvar.pollSelected.schema.controls.findIndex(a=>a.name===s);if(o>=0)if("delete"===this.result._command_)this.sharedvar.pollSelected.schema.controls.splice(o,1),this.ctrlSel=-1;else{this.ctrlSel=o;let a=document.getElementById("spanTrigger");a&&(a.style.display="",a.style.position="absolute",a.style.left=r._btnEvent_.pageX+5+"px",a.style.top=r._btnEvent_.pageY+5+"px",this.editControlTrigger.openMenu())}}}onGetGeneralData(r){this.dg.updatePropResult(this.sharedvar.pollSelected,r)}onEditCtrl(){this.onAddEditControl(this.ctrlSel)}onHelpCtrl(){if(this.sharedvar.pollSelected&&this.sharedvar.pollSelected.schema&&this.sharedvar.pollSelected.schema.controls){const r=this.sharedvar.pollSelected.schema.controls[this.ctrlSel];this.dg.aDefault({title:"Ayuda/Tips",schema:{controls:[{name:"help",label:"Ayuda:",type:"textarea",style:"w-full",totalRows:5,validators:{}}]},value:{help:r.tags?r.tags.help:""},dgheigth:315}).subscribe(function(){var a=(0,C_Users_Juan_Carlos_Documents_proyectos_tasky_tasky_supplier_node_modules_pnpm_babel_runtime_7_20_13_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__.Z)(function*(c){c&&(r.tags||(r.tags=[]),r.tags.help=c.help)});return function(c){return a.apply(this,arguments)}}())}}onDupCtrl(){if(this.sharedvar.pollSelected&&this.sharedvar.pollSelected.schema.controls){const r={...this.sharedvar.pollSelected.schema.controls[this.ctrlSel]};this.AddCtrl(r)}}onCopyCtrl(){if(this.sharedvar.pollSelected&&this.sharedvar.pollSelected.schema.controls){const s=JSON.stringify({objectname:"controls",controls:[this.sharedvar.pollSelected.schema.controls[this.ctrlSel]]});navigator.clipboard.writeText(s).then(o=>{}).catch(o=>alert(o)),this.snkBar.open("copiado al portapapeles.","Ok",{duration:3e3})}}onCopyModel(){if(this.sharedvar.pollSelected&&this.sharedvar.pollSelected.schema.controls){const s=JSON.stringify({objectname:"controls",controls:this.sharedvar.pollSelected.schema.controls});navigator.clipboard.writeText(s).then(o=>{}).catch(o=>alert(o)),this.snkBar.open("copiado al portapapeles.","Ok",{duration:3e3})}}onPasteControlModel(){var r=this;this.snkBar.open("Esta acci\xf3n agrega controles desde el portapapeles","Continuar",{duration:3e3}).onAction().subscribe(function(){var s=(0,C_Users_Juan_Carlos_Documents_proyectos_tasky_tasky_supplier_node_modules_pnpm_babel_runtime_7_20_13_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__.Z)(function*(o){navigator.clipboard.readText().then(function(){var a=(0,C_Users_Juan_Carlos_Documents_proyectos_tasky_tasky_supplier_node_modules_pnpm_babel_runtime_7_20_13_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_3__.Z)(function*(c){try{const e=JSON.parse(c);if(!e.objectname||"controls"!==e.objectname)return;e.controls.forEach(m=>{r.AddCtrl(m)})}catch(e){console.error("wrong file type: ",e)}});return function(c){return a.apply(this,arguments)}}()).catch(a=>{console.error("Cannot read clipboard text: ",a)})});return function(o){return s.apply(this,arguments)}}())}AddCtrl(r){r.name=this.dtb.getUniqueName("",r.name,this.sharedvar.pollGrpExecuted.pollList),this.sharedvar.pollSelected.schema.controls.push(r)}onDrop(r){if(!0===this.deleteDrop){console.log("dropped",r);const s=this.sharedvar.pollSelected.schema.controls.findIndex(o=>o.name===r);s>-1&&this.sharedvar.pollSelected.schema.controls.splice(s,1)}}onMouseover(r){this.deleteDrop=!0}onMouseexit(r){this.deleteDrop=!1}onDeleteControls(){this.commandIcon=""===this.commandIcon?"delete":""}static#_=this.\u0275fac=function r(s){return new(s||_PollDetailComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.Y36(src_app_shared_var_service__WEBPACK_IMPORTED_MODULE_4__.D),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Y36(src_app_dialog_service__WEBPACK_IMPORTED_MODULE_0__.x),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Y36(_angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_5__.ux),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Y36(src_app_database_service__WEBPACK_IMPORTED_MODULE_1__.k))};static#_2=this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__.Xpm({type:_PollDetailComponent,selectors:[["app-poll-detail"]],viewQuery:function r(s,o){if(1&s&&_angular_core__WEBPACK_IMPORTED_MODULE_2__.Gf(_c0,5),2&s){let a;_angular_core__WEBPACK_IMPORTED_MODULE_2__.iGM(a=_angular_core__WEBPACK_IMPORTED_MODULE_2__.CRH())&&(o.editControlTrigger=a.first)}},decls:41,vars:3,consts:[["id","spanTrigger",3,"matMenuTriggerFor"],["editControlTrigger","matMenuTrigger"],["class","p-2 flex flex-col items-stretch",4,"ngIf"],["matTooltip","Eliminar el control.",1,"fixed","z-1500","bottom-8","right-28","border-solid","border-2","bg-white","w-16","h-16","rounded-full","drop-shadow-lg","flex","justify-center","items-center","text-violet-700","hover:bg-gray-200",3,"mouseover","mouseout","click"],[1,"fixed","z-1000","bottom-8","right-10","border-solid","border-2","bg-white","w-16","h-16","rounded-full","drop-shadow-lg","flex","justify-center","items-center","text-violet-700","hover:bg-gray-200",3,"matMenuTriggerFor"],["controlEditByCtrl","matMenu"],["mat-menu-item","",3,"click"],[1,"mat-18"],["controlEdit","matMenu"],[1,"p-2","flex","flex-col","items-stretch"],[3,"jsonFormData","editButton","commands","result","dropped"]],template:function r(s,o){if(1&s&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__._UZ(0,"span",0,1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.YNc(2,PollDetailComponent_div_2_Template,2,3,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(3,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("mouseover",function(c){return o.onMouseover(c)})("mouseout",function(c){return o.onMouseexit(c)})("click",function(){return o.onDeleteControls()}),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(4,"mat-icon"),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(5,"delete"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(6,"button",4)(7,"mat-icon"),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(8,"menu"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(9,"mat-menu",null,5)(11,"button",6),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){return o.onEditCtrl()}),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(12,"mat-icon",7),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(13,"edit"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(14," Editar "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(15,"button",6),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){return o.onHelpCtrl()}),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(16,"mat-icon",7),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(17,"question_mark"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(18," Ayuda/Tips "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(19,"button",6),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){return o.onDupCtrl()}),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(20,"mat-icon",7),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(21,"content_copy"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(22," Duplicar "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(23,"button",6),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){return o.onCopyCtrl()}),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(24,"mat-icon",7),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(25,"content_copy"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(26," Copiar "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(27,"mat-menu",null,8)(29,"button",6),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){return o.onAddEditControl()}),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(30,"mat-icon"),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(31,"add"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(32," Agregar "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(33,"button",6),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){return o.onCopyModel()}),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(34,"mat-icon"),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(35,"folder_copy"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(36," Copiar Formulario "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(37,"button",6),_angular_core__WEBPACK_IMPORTED_MODULE_2__.NdJ("click",function(){return o.onPasteControlModel()}),_angular_core__WEBPACK_IMPORTED_MODULE_2__.TgZ(38,"mat-icon"),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(39,"content_paste"),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_2__._uU(40," Agregar controles desde portapapeles "),_angular_core__WEBPACK_IMPORTED_MODULE_2__.qZA()()),2&s){const a=_angular_core__WEBPACK_IMPORTED_MODULE_2__.MAs(10),c=_angular_core__WEBPACK_IMPORTED_MODULE_2__.MAs(28);_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("matMenuTriggerFor",a),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("ngIf",o.sharedvar.pollSelected&&o.sharedvar.pollSelected.schema),_angular_core__WEBPACK_IMPORTED_MODULE_2__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_2__.Q6J("matMenuTriggerFor",c)}},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_6__.O5,_components_dynamic_form_dynamic_form_component__WEBPACK_IMPORTED_MODULE_7__.r,_angular_material_menu__WEBPACK_IMPORTED_MODULE_8__.VK,_angular_material_menu__WEBPACK_IMPORTED_MODULE_8__.OP,_angular_material_menu__WEBPACK_IMPORTED_MODULE_8__.p6,_angular_material_icon__WEBPACK_IMPORTED_MODULE_9__.Hw,_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_10__.gM]})}return _PollDetailComponent})()},6357:(r,s,o)=>{o.r(s),o.d(s,{PollListEditModule:()=>G});var a=o(7087),c=o(3759),e=o(2283),E=o(4758),m=o(6806),O=o(3638),h=o(1359),b=o(3578),g=o(3241),U=o(8046),v=o(6410),P=o(8464),D=o(5559),p=o(9347);const L=["parent"];function B(l,M){if(1&l){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e._uU(2),e.TgZ(3,"mat-icon",12),e.NdJ("click",function(){const n=e.CHM(t).index,d=e.oxw();return e.KtG(d.onAddEditPoll(n))}),e._uU(4,"edit"),e.qZA()(),e.TgZ(5,"p",13),e._uU(6),e.qZA(),e.TgZ(7,"div",14)(8,"div",15)(9,"div",16)(10,"input",17),e.NdJ("change",function(i){const d=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.setBoolStartState(d,i))}),e.qZA(),e.TgZ(11,"label",18),e._uU(12,"Inicio"),e.qZA()(),e.TgZ(13,"div",19)(14,"input",20),e.NdJ("change",function(i){const d=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.setBoolEndState(d,i))}),e.qZA(),e.TgZ(15,"label",21),e._uU(16,"Fin"),e.qZA()()(),e.TgZ(17,"div",22)(18,"div",23),e.NdJ("click",function(){const n=e.CHM(t).index,d=e.oxw();return e.KtG(d.onDelete(n))}),e.TgZ(19,"mat-icon"),e._uU(20,"delete"),e.qZA()(),e.TgZ(21,"div",24),e.NdJ("click",function(){const n=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.onDetaill(n))}),e.TgZ(22,"div",25),e._uU(23,"Detalle"),e.qZA(),e._uU(24," \xa0 "),e.TgZ(25,"div",26)(26,"mat-icon"),e._uU(27,"east"),e.qZA()()()()()()}if(2&l){const t=M.$implicit,_=e.oxw();e.Q6J("ngClass",_.getClass(t)),e.xp6(2),e.hij("",t.title," "),e.xp6(4),e.Oqu(t.description),e.xp6(4),e.Q6J("checked",t.allowStart),e.xp6(4),e.Q6J("checked",t.allowEnd)}}let C=(()=>{class l{constructor(t,_,i,n,d){this.sharedvar=t,this.dtb=_,this.dg=i,this.snkBar=n,this.nvg=d,this.onSelected=new e.vpe,this.onUpdatedAll=new e.vpe,this.flexHeightClass="overflow-auto flex flex-row flex-wrap p-2 gap-2",this.leftPos=420,this.formData={controls:[{name:"title",label:"Nombre del Formulario:",type:"text",style:"w-full",validators:{required:!0}},{name:"description",label:"Descripci\xf3n:",type:"textarea",totalRows:4,style:"w-full",validators:{}},{name:"allowStart",label:"Iniciar",type:"checkbox",validators:{}},{name:"allowEnd",label:"Finalizar",type:"checkbox",validators:{}}]},this.formDataOnStartEnd={controls:[{name:"sendMail2",label:"Enviar a correos electr\xf3nicos:",type:"textarea",totalRows:4,style:"w-full",validators:{}},{name:"sendCRMMail",label:"Agregar correo del cliente CRM",type:"checkbox",validators:{}},{name:"geoLoc",label:"Agregar ubicaci\xf3n",type:"checkbox",validators:{}}]}}ngOnInit(){return(0,g.Z)(function*(){})()}ngAfterViewInit(){let t=this.parentEl.nativeElement.getBoundingClientRect();this.leftPos!==t.left&&(this.leftPos=t.left,console.log("Left = ",this.leftPos))}getLeftButtonPos(){return`fixed z-90 bottom-8 left-[${Math.trunc(this.leftPos+8)}px] border-solid border-2 bg-white w-16 h-16 rounded-full drop-shadow-lg flex justify-center items-center text-violet-700 hover:bg-gray-200`}getClicked(t){2===t.index&&this.onAddEditPoll()}getClass(t){let _="h-[12rem] w-80 rounded-md p-3 shadow-lg ";return this.sharedvar.pollSelected?.id===t.id?_+"bg-yellow-100 ":_+"bg-white "}onAddEditPoll(t=-1){let _=this.dtb.newPoll();t>=0&&(_=this.sharedvar.pollGrpExecuted.pollList[t]),this.dg.aDefault({title:"Formulario",schema:this.formData,dgwidth:300,dgheigth:450,value:_}).subscribe(n=>{if(n){if(!n._valid_)return void this.snkBar.open("Debe ingresar la informaci\xf3n solicitada.","Ok",{duration:5e3});this.dg.updatePropResult(_,n),t<0?this.sharedvar.pollGrpExecuted.pollList.push(_):this.sharedvar.pollGrpExecuted.pollList[t]=_,this.sharedvar.pollSelected=_}})}onCopyFromPollList(){if(this.sharedvar.pollSelected&&this.sharedvar.pollSelected.schema.controls){const _=JSON.stringify({objectname:"polllist",controls:this.sharedvar.pollGrpExecuted.pollList});navigator.clipboard.writeText(_).then(i=>{}).catch(i=>alert(i)),this.snkBar.open("copiado al portapapeles.","Ok",{duration:3e3})}}onPasteFromPollList(){var t=this;this.snkBar.open("Esta acci\xf3n reemplazar\xe1 todos los formularios de \xe9ste grupo.","Continuar",{duration:7e3}).onAction().subscribe(function(){var _=(0,g.Z)(function*(i){navigator.clipboard.readText().then(function(){var n=(0,g.Z)(function*(d){try{const u=JSON.parse(d);if(!u.objectname||"polllist"!==u.objectname)return;t.sharedvar.pollGrpExecuted.pollList=u.controls,t.onUpdatedAll.emit(t.sharedvar.pollGrpExecuted.pollList)}catch(u){console.error("wrong file type: ",u)}});return function(d){return n.apply(this,arguments)}}()).catch(n=>{console.error("Cannot read clipboard text: ",n)})});return function(i){return _.apply(this,arguments)}}())}setBoolStartState(t,_){t.allowStart=_.target.checked,this.sharedvar.pollGrpExecuted.pollList.sort((i,n)=>Number(n.allowStart)-Number(i.allowStart))}setBoolEndState(t,_){t.allowEnd=_.target.checked}setBool(t){t.allowStart&&this.sharedvar.pollGrpExecuted.pollList.forEach(_=>{_.id!==t.id&&(t.allowStart=!1)})}onStarEndData(t){let _;_=t?this.sharedvar.pollGrpExecuted.onStart:this.sharedvar.pollGrpExecuted.onEnd,this.dg.aDefault({schema:this.formDataOnStartEnd,value:_,title:"Actividades autom\xe1ticas",dgwidth:350,dgheigth:375}).subscribe(n=>{n&&(t?this.sharedvar.pollGrpExecuted.onStart=n:this.sharedvar.pollGrpExecuted.onEnd=n)})}onDetaill(t){this.onSelected.emit(t)}onDelete(t){this.onSelected.emit(this.sharedvar.pollGrpExecuted.pollList[t]),this.snkBar.open(`Eliminar: ${this.sharedvar.pollGrpExecuted.pollList[t].title}.`,"Eliminar",{duration:5e3}).onAction().subscribe(_=>{this.sharedvar.pollGrpExecuted.pollList.splice(t,1),this.sharedvar.pollSelected=null})}static#e=this.\u0275fac=function(_){return new(_||l)(e.Y36(E.D),e.Y36(m.k),e.Y36(O.x),e.Y36(h.ux),e.Y36(U.$))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-poll-list"]],viewQuery:function(_,i){if(1&_&&e.Gf(L,5),2&_){let n;e.iGM(n=e.CRH())&&(i.parentEl=n.first)}},outputs:{onSelected:"onSelected",onUpdatedAll:"onUpdatedAll"},decls:33,vars:6,consts:[["parent",""],[1,"flex","flex-col","gap-1"],["matTooltip","Inicio del proceso: Agregar ubicaci\xf3n y listado de correos de notificaci\xf3n",1,"flex","items-center","justify-start","h-12","w-80","rounded-md","bg-white","p-3","shadow-lg",3,"click"],[1,"flex-1","mt-1","mb-2","font-medium","leading-tight","overflow-hidden"],["mat-stroked-button","","color","primary"],["matTooltip","Final del proceso: Agregar ubicaci\xf3n y listado de correos de notificaci\xf3n",1,"flex","items-center","justify-start","h-12","w-80","rounded-md","bg-white","p-3","shadow-lg",3,"click"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"matMenuTriggerFor"],["controlEdit","matMenu"],["mat-menu-item","",3,"click"],[3,"ngClass"],[1,"mb-2","font-medium","leading-tight","overflow-hidden"],[1,"text-violet-500","ml-2",3,"click"],[1,"mb-4","h-12","pl-3","overflow-hidden"],[1,"flex","items-center","justify-start"],[1,"grow"],[1,"flex","items-center","mb-1"],["id","inicio","type","checkbox","matTooltip","Punto de inicio del proceso",1,"w-4","h-4","text-violet-500","bg-gray-100","border-gray-300","rounded","dark:focus:ring-violet-500","dark:ring-offset-gray-800","focus:ring-2","dark:bg-gray-700","dark:border-gray-600",3,"checked","change"],["for","inicio",1,"ml-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],[1,"flex","items-center"],["checked","","id","fin","type","checkbox","matTooltip","Punto de finalizaci\xf3n del proceso",1,"w-4","h-4","text-violet-500","bg-gray-100","border-gray-300","rounded","dark:focus:ring-violet-500","dark:ring-offset-gray-800","focus:ring-2","dark:bg-gray-700","dark:border-gray-600",3,"checked","change"],["for","fin",1,"ml-2","text-sm","font-medium","text-gray-900","dark:text-gray-300"],[1,"flex","gap-1","text-violet-500","text-sm"],["matTooltip","Elimina formulario",1,"w-9","h-9","p-1","border","border-gray-300","rounded-sm","hover:bg-yellow-50",3,"click"],["matTooltip","Controles asignados al formulario",1,"flex","h-9","p-","border","border-gray-300","rounded-sm","hover:bg-yellow-50",3,"click"],[1,"mt-[0.2rem]","p-1"],[1,"mt-[0.3rem]"]],template:function(_,i){if(1&_&&(e.TgZ(0,"div",null,0)(2,"div",1)(3,"div",2),e.NdJ("click",function(){return i.onStarEndData(!0)}),e.TgZ(4,"div",3),e._uU(5,"Actividades comienzo"),e.qZA(),e.TgZ(6,"div")(7,"button",4),e._uU(8," Detalle "),e.qZA()()(),e.TgZ(9,"div",5),e.NdJ("click",function(){return i.onStarEndData(!1)}),e.TgZ(10,"div",3),e._uU(11,"Actividades Fin"),e.qZA(),e.TgZ(12,"div")(13,"button",4),e._uU(14," Detalle "),e.qZA()()(),e.YNc(15,B,28,5,"div",6),e.qZA(),e.TgZ(16,"button",7)(17,"mat-icon"),e._uU(18,"menu"),e.qZA()()(),e.TgZ(19,"mat-menu",null,8)(21,"button",9),e.NdJ("click",function(){return i.onAddEditPoll()}),e.TgZ(22,"mat-icon"),e._uU(23,"add"),e.qZA(),e._uU(24," Agregar. "),e.qZA(),e.TgZ(25,"button",9),e.NdJ("click",function(){return i.onCopyFromPollList()}),e.TgZ(26,"mat-icon"),e._uU(27,"folder_copy"),e.qZA(),e._uU(28," Copiar lista de formularios. "),e.qZA(),e.TgZ(29,"button",9),e.NdJ("click",function(){return i.onPasteFromPollList()}),e.TgZ(30,"mat-icon"),e._uU(31,"content_paste"),e.qZA(),e._uU(32," Reemplazar formularios. "),e.qZA()()),2&_){const n=e.MAs(20);e.Tol(i.flexHeightClass),e.xp6(15),e.Q6J("ngForOf",i.sharedvar.pollGrpExecuted.pollList),e.xp6(1),e.Tol(i.getLeftButtonPos()),e.Q6J("matMenuTriggerFor",n)}},dependencies:[a.mk,a.sg,v.lW,P.Hw,D.gM,p.VK,p.OP,p.p6]})}return l})();var T=o(9381);function y(l,M){1&l&&e._UZ(0,"app-poll-list")}function x(l,M){if(1&l){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"app-poll-list",7),e.NdJ("onSelected",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onSelected(i))})("onUpdatedAll",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onUpdatedAll(i))}),e.qZA()(),e.TgZ(3,"div",8),e._UZ(4,"app-poll-detail"),e.qZA()()}}const I=[{path:"",component:(()=>{class l{constructor(t,_,i,n){this.sharedvar=t,this.dtb=_,this.dg=i,this.snkBar=n,this.screenSplit=!0,this.formData={controls:[{name:"title",label:"Nombre del Formulario:",type:"text",style:"w-full",validators:{required:!0}},{name:"description",label:"Descripci\xf3n:",type:"textarea",style:"w-full h-36",totalRows:5,validators:{}},{name:"allowStart",label:"Iniciar",type:"checkbox",validators:{}},{name:"allowEnd",label:"Finalizar",type:"checkbox",validators:{}}]}}ngOnInit(){this.sharedvar.pollSelected=this.sharedvar.pollGrpExecuted.pollList.length>0?this.sharedvar.pollGrpExecuted.pollList[0]:null}onSelected(t){this.sharedvar.pollSelected=t}onUpdatedAll(t){this.sharedvar.pollSelected=t[0]}onAddEditPoll(t=-1){let _=this.dtb.newPoll();t>=0&&(_=this.sharedvar.pollGrpExecuted.pollList[t]),this.dg.aDefault({title:"Formulario",schema:this.formData,dgwidth:300,dgheigth:450,value:_}).subscribe(n=>{if(n){if(!n._valid_)return void this.snkBar.open("Debe ingresar la informaci\xf3n solicitada.","Ok",{duration:5e3});this.dg.updatePropResult(_,n),t<0?this.sharedvar.pollGrpExecuted.pollList.push(_):this.sharedvar.pollGrpExecuted.pollList[t]=_}})}static#e=this.\u0275fac=function(_){return new(_||l)(e.Y36(E.D),e.Y36(m.k),e.Y36(O.x),e.Y36(h.ux))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-poll-list-edit"]],decls:5,vars:4,consts:[[1,"flex","flex-col","max-h-screen"],[3,"buttons","nav_menu"],[1,"flex-1","m-2","overflow-scroll"],[4,"ngIf"],["class","flex max-h-screen",4,"ngIf"],[1,"flex","max-h-screen"],[1,"overflow-y-visible","h-screen","w-96","bg-slate-200"],[3,"onSelected","onUpdatedAll"],[1,"overflow-y-visible","h-screen","w-3/5","p-2"]],template:function(_,i){1&_&&(e.TgZ(0,"div",0),e._UZ(1,"app-header",1),e.TgZ(2,"div",2),e.YNc(3,y,1,0,"app-poll-list",3),e.YNc(4,x,5,0,"div",4),e.qZA()()),2&_&&(e.xp6(1),e.Q6J("buttons","110101")("nav_menu",!0),e.xp6(2),e.Q6J("ngIf",!i.screenSplit),e.xp6(1),e.Q6J("ngIf",i.screenSplit))},dependencies:[a.O5,b.G,C,T.p]})}return l})()}];let R=(()=>{class l{static#e=this.\u0275fac=function(_){return new(_||l)};static#t=this.\u0275mod=e.oAB({type:l});static#_=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(I),c.Bz]})}return l})();var f=o(769),A=o(7572);const K=[{path:"",component:C}];let k=(()=>{class l{static#e=this.\u0275fac=function(_){return new(_||l)};static#t=this.\u0275mod=e.oAB({type:l});static#_=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(K),c.Bz]})}return l})();var W=o(6302);let w=(()=>{class l{static#e=this.\u0275fac=function(_){return new(_||l)};static#t=this.\u0275mod=e.oAB({type:l});static#_=this.\u0275inj=e.cJS({imports:[a.ez,k,f.O,v.ot,P.Ps,W.p9,D.AV,p.Tx]})}return l})();const Z=[{path:"",component:T.p}];let S=(()=>{class l{static#e=this.\u0275fac=function(_){return new(_||l)};static#t=this.\u0275mod=e.oAB({type:l});static#_=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(Z),c.Bz]})}return l})(),J=(()=>{class l{static#e=this.\u0275fac=function(_){return new(_||l)};static#t=this.\u0275mod=e.oAB({type:l});static#_=this.\u0275inj=e.cJS({imports:[a.ez,S,h.ZX,A.N,f.O,p.Tx,P.Ps,D.AV]})}return l})(),G=(()=>{class l{static#e=this.\u0275fac=function(_){return new(_||l)};static#t=this.\u0275mod=e.oAB({type:l});static#_=this.\u0275inj=e.cJS({imports:[a.ez,R,f.O,A.N,w,J]})}return l})()}}]);